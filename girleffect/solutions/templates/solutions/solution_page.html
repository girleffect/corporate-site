{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags static %}

{% block content %}

    {# Hero section - section includes links #}
    <section class="hero">
        {% if page.logo %}
            {% image page.logo original as solution_logo %}
            <img src="{{ solution_logo.url }}" alt="{{ page.title }}">
        {% elif page.strapline %}
            <h2>{{ page.strapline }}</h2>
        {% endif %}

        {# Link field to video or page #}
        {% if page.link_page or page.link_url %}
            {% if page.link_page %}
                <a href="{{ page.link_page.url }}">{{ page.link_text }}</a>
            {% elif page.link_url  %}
                <a href="{{ page.link_url }}" target="_blank">{{ page.link_text }}</a>
            {% endif %}
        {% endif %}

        {# Hero video include #}
        {% include "includes/hero_video.html" with video=page.hero_video feature=page.hero_fallback_image %}
    </section>

    {# Streamfield options #}
    <section class="body">
        {{ page.body }}
    </section>

    {# Related partners #}
    {% if page.partners %}
    <section class="partners">
        <h2>Partners</h2>
        {% for partner in page.partners %}
            {# Partner card here #}
            {% include "includes/partner_card.html" with partner=partner %}
        {% endfor %}
    </section>
    {% endif %}

    {# Related people #}
    {% if page.person_category and page.people %}
    <section class="people">
        <h2>People</h2>
        <h3>{{ page.person_category }}</h3>
        {% for person in page.people %}
            {# Person card here #}
            {% include "includes/person_index_card.html" with person=person %}
        {% endfor %} 
    </section>   
    {% endif %}

    {# Call to Action, link is likely external #}
    {% if page.call_to_action %}
    <section class="cta">
        <h2>Call to Action</h2>
        <a href="{{ page.call_to_action.link_url }}">
            {{ page.call_to_action.title }}
        </a>
    </section>
    {% endif %}

    {# Latest articles, limited to three most recent, link to all articles index #}
    {% if page.articles %}
    <section class="articles">
        <h2>Latest in {{ page.title }}</h2>
        {% for article in page.articles %}
            {% include "includes/article_card.html" %}
        {% endfor %}
        <a href="/articles">See all news</a>
    </section>
    {% endif %}
    
    {% include "includes/share.html" %}

{% endblock %}
