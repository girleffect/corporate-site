{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags static %}

{% block content %}
    {# Hero section #}
    {% include "includes/hero_image_section.html" %}

    <section class="section">
        <div class="wrapper wrapper--medium wrapper--bottom-space">
            {# Intro is RichText #}
            {{ page.introduction }}

            <form method="GET">
                <select name="category" class="js-article-filter">
                    <option value="">All</option>
                    {% for category in categories %}
                        <option value="{{ category.0 }}" {% if request.GET.category == category.0|slugify %}selected="selected"{% endif %}>{{ category.1 }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>

        {% if articles %}

            <div class="article-container wrapper wrapper--medium">
                {% for article in articles %}
                    <a class="article-card" href="{% pageurl article %}">
                            {% image article.listing_image|default:article.hero_image|default:settings.utils.SocialMediaSettings.default_sharing_image fill-380x225 %}
                        <div class="article-card__content">
                            <span class="article-card__date">{{ article.display_date }}</span>
                            {% if article.listing_title %}
                                <div>{{ article.listing_title }}</div>
                            {% else %}
                                <div>{{ article.title }}</div>
                            {% endif %}
                            {% if article.listing_summary %}
                                <p>{{ article.listing_summary }}</p>
                            {% endif %}
                            <div class="arrow"></div>
                        </div>
                    </a>
                {% endfor %}
            </div>

            <div class="wrapper wrapper--medium">
                {% include "includes/pagination.html" with subpages=articles %}
            </div>
        {% else %}
            {# no items #}
        {% endif %}
    </section>
{% endblock %}
